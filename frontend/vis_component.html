<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        #graph-container {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div id="graph-container"></div>
    <script type="text/javascript">
        // 그래프 데이터 (Streamlit에서 주입됨)
        const graphData = {{GRAPH_DATA}};
        
        // 노드 및 엣지 데이터 준비
        const nodes = new vis.DataSet(graphData.nodes || []);
        const edges = new vis.DataSet(graphData.edges || []);
        
        const data = {
            nodes: nodes,
            edges: edges
        };
        
        const options = {
            nodes: {
                shape: 'dot',
                size: 16,
                font: {
                    size: 14,
                    face: 'Arial'
                },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                width: 2,
                color: { inherit: 'from' },
                smooth: {
                    type: 'continuous'
                },
                arrows: {
                    to: {
                        enabled: true,
                        scaleFactor: 0.5
                    }
                }
            },
            physics: {
                enabled: true,
                stabilization: {
                    enabled: true,
                    iterations: 200
                }
            },
            interaction: {
                hover: true,
                tooltipDelay: 200,
                zoomView: true,
                dragView: true
            }
        };
        
        const container = document.getElementById('graph-container');
        const network = new vis.Network(container, data, options);
        
        // 네트워크 이벤트 리스너
        network.on("click", function (params) {
            if (params.nodes.length > 0) {
                const nodeId = params.nodes[0];
                const node = nodes.get(nodeId);
                console.log("클릭된 노드:", node);
            }
        });
        
        network.on("hoverNode", function (params) {
            container.style.cursor = 'pointer';
        });
        
        network.on("blurNode", function (params) {
            container.style.cursor = 'default';
        });
    </script>
</body>
</html>
